#### Deploy Cognito Stack

Replace CallbackUrl, LogoutUrl with your CloudFront URL from your deployed frontend

```bash
aws cloudformation deploy \
    --stack-name free-app-auth \
    --template-file infra/auth-cognito.yml \
    --capabilities CAPABILITY_NAMED_IAM \
    --parameter-overrides \
        AppName=free-app \
        CallbackUrl=https://YOUR_CLOUDFRONT_URL \
        LogoutUrl=https://YOUR_CLOUDFRONT_URL \
        DomainPrefix=free-app \
    --profile free-app-ci
```

#### Get Stack Outputs (Cognito User Pool)
```bash
aws cloudformation describe-stacks \
  --stack-name free-app-auth \
  --profile free-app-ci \
  --query "Stacks[0].Outputs"
```

#### Deploy Auth Lambda

NOTE: SAM Template is very picky about how the comma separated list is passed in. 

The list must look EXACTLY like this when consumed by the template: "'URL1,URL2'"

Below the Parameter Override has been formatted to avoid quotes being stripped from the input.

```bash
sam build --template-file infra/auth-lambda.yml

sam deploy \
  --template-file infra/auth-lambda.yml \
  --stack-name free-app-auth-lambda \
  --profile free-app-ci \
  --parameter-overrides \
    CognitoRegion=us-west-2 \
    CognitoUserPoolId=us-west-2_xxxxxx \
    "OriginList=\"'http://localhost:5173,https://xxxxxx.cloudfront.net'\"" \
  --resolve-s3 \
  --capabilities CAPABILITY_IAM
```

#### Get Stack Outputs (Auth Lambda)
```bash
aws cloudformation describe-stacks \
  --stack-name free-app-auth-lambda \
  --profile free-app-ci \
  --query "Stacks[0].Outputs"
```